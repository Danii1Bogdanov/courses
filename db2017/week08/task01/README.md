# Первый запрос

Запрос находит, сколько резервирований было сделано в кораблях первого класса с
вместимостью меньше указанного значения `_capacity`,  в полетах на указанную планету `_planet_name`.  

```sql
-- Здесь можно сделать что-нибудь до начала теста
-- CREATE INDEX idx1 ON Commander(name);

---------------------------------------------------------- 
-- Запрос будет получать параметры _planet_name и _capacity
SELECT COUNT(1)
FROM Flight F JOIN Spacecraft S ON F.spacecraft_id = S.id
JOIN Planet P ON F.planet_id = P.id
JOIN Booking B ON F.id = B.flight_id
WHERE S.capacity<_capacity AND S.class=1
AND P.name=_planet_name;
```

## Проверка решения

Робот выполняет нагрузочный тест, состоящий из `100` запусков запроса
с разными параметрами, и замеряет `user_time` - общее время выполнения
теста. Полученный результат сравнивается с `robot_time` - эталонным
результатом, полученным прогоном того же самого нагрузочного теста
с теми же самыми параметрами, но с оптимизацией, произведённой роботом. 
Если `user_time < robot_time * 1.5` то задача считается решённой.

## Требования к решению

В решении должно быть две части, отделённых друг от друга строкой, начинающейся с четырёх минусов.

В первую часть можно поместить команды, создающие индексы или 
делающие что-то ещё до начала прогона нагрузочного теста. 
Если вы не считаете нужным что-либо делать в первой части, поместите туда комментарий, начинающийся с двух минусов.

Во второй части нужно поместить запрос, возвращающий те 
же результаты, что и оригинальный запрос, приведённый выше. 
Обратите внимание, что запрос принимает параметры.

Приведённый ваше код сам по себе будет валидным (но неправильным) ответом.

Процесс проверки требует значительных ресурсов, поэтому мы 
настоятельно рекомендуем заниматься экспериментами на своем собственном Постгресе и отсылать решение только когда получено ожидаемое ускорение запроса.

## Ожидаемый результат

После выполнения некоторых действий время выполнения одного запроса с 
конкретными параметрами и тестового прогона целиком уменьшается примерно в 20-25 раз.
