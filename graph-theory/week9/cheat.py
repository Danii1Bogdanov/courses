#!/usr/bin/env python3
# coding=utf-8


import sys


def read_data():
    for line in sys.stdin:
        yield tuple(tuple(map(int, cycle.split()))
                    for cycle in line.split(";"))


def find_phi(sigma, alpha):
    def find_map(v):
        for cycle in sigma:
            if v in cycle:
                return cycle[(cycle.index(v) + 1) % len(cycle)]

    processed = [False for _ in range(2 * len(alpha))]
    phi_counter = 0
    i = 0

    while not all(processed):
        a, b = alpha[i]
        processed[a - 1] = True
        processed[b - 1] = True
        a1 = find_map(b)
        b1 = find_map(a)
        if processed[a1 - 1] is True:
            phi_counter += 1
        if processed[b1 - 1] is True:
            phi_counter += 1
        processed[a1 - 1] = True
        processed[b1 - 1] = True
        i += 1

    return phi_counter

first_t = "1;2"
second_t = "1 44 29;2 46 7 13 38 28 34 33 42;3 45 22 35 40 16 25 31 32 14 17 41 6 39 9 15 12 4 19 8 24 26 30;5 21 43 27 20 18 11 10 37 36;23"
third_t = "1 11;2 10;3;4 15 12 9 16 14 6 5 7 8;13"
forth_t = "1 7 30 73 60 28 69 47 56 58 54 45 37 50 59 62 8 74 61 76 25 53 2 4 83 17 43 29 63 42 40 81 14 19 78 82 38 65 3 52 55 71 24 35 6 41 39 48 5 33 18 84 34 26 79 31 12 70 46 9;10 11 75 13 15 32 20 68 57 22 44 77 16 23 27 64 67;21 66 49 36 72;51 80"
fifth_t = "1 3 5 4;2 8 7;6"
sixth_t = "1 74 52 79 67 75 28 42 5 62 81 8 34 45 29 86 77 18 80 48 64 35 38 78 53 91 33 61 6 14 23 10;2 22 65 51 41 15 84 25 47 16 43 20 57 58 31 39 13 19 72 46 71 32 26 4 37 59 69 70 90 55 27 89 36 66 24 7 12 88 60 63 54 9 56;3 17 82 73 92 11 30 76 68 49 44 87 21;40;50 85 83"
seventh_t = "1 24 17 20 22 8 26 21 9 3 7 15 25 4 18 16 6 12 11;2 19 28 27 14 13 23;5;10"
eigth_t = "1 22 23 5 11 19 3 25 17 15 8 18 14 9 20 21 2 4 26 10 6 12;7 13 16;24"
ninth_t = "1 8;2 6 10 7 5 11 12 4 3 13 9 14"
tenth_t = "1 18 13 39 14 27 9 15 37 5 10 38 32 22 24 8 31 40 21 11 2 30 26;3 35 34 20 7 29 16 4;6 19 36 25 23 17 33;12;28"
eleventh_t = "1 63 64 65 29 25;2 26 59 37 39 32 5 23 27 15 7 66 57 10 52 46 24 67 31 44 16 40 9 42 58 22 62 61 21 17 48 34 43 50 45 53 47 41 28;3 11 30 6 20 14 56 8 60 38 19 49 51 68 33 35 55 13 36 18 4 12;54"
twelth_t = "1 17 7 12;2 27 45 23 6 5 36 28 18 19 35 41 30 15 38 3 10 43 42 44 13 39 25;4 9 33 40 31 16 34 22 20 26;8 37;11 14 46 24;21;29 32"
thirteenth_t = "1 49 46 34 50 57 56 17 55 6 36;2 62 18 25 53 31 37 54 27 51;3 48 30 22 39 14 7 35 33 11 13 28 52 45 21 44 10 32 41 38 60 19 58 4 5;8 40;9 59 26 47 64 16 12 29 63 43 15 20;23 61;24;42"
fourteenth_t = "1;2 15;3 18 11 7 12 17 4 6 9;5 13 14 10 16;8"
fifteenth_t = "1 8 6 10 5 7 3 9 11 4 2 12"
sixteenth_t = "1 70 43 18 53 68 62 5 29 73 22 59 75 65 76 45 48 14 93 31 79 17 19 37 9 46 15 23 21 50 8 61 55 28 81 10 13 91 7 11 83 82 77 40 49 38;2 87 78 84 35 52 34 86 4;3 67 16 39 74 24 6 69 58 12 30 85 89 54 27 92 44 25 47 32 66 20 94;26 60 71 41 51;33 72 90 42 88 57 56 63 36 80;64"
seventeenth_t = "1 3 4;2"
eighteenth_t = "1 3 43 64 71 25 21 42 27 18 22 44 23 68 81 15 54 70 78 37 32 57 41 16 35 63 61 2 51 55 69 82 19 77 8 17 53 45 73 36 20 26 79 49 33 12 80 13 75 46 14 50 7 28 65 66 74 6 72 47 10 60 11 40 24 9 39 62 31 56 76 29 30 52 48 67 5 4 58;34 59 38"
nineteenth_t = "1 47 31 62 72 53 45 43 59 27 38 49 6 23 68 56 16 11 14 37 5 46 8 25 57 64 10 58 21 12 48 4 39 19 52 20 41 3 54 50 22 44 35 32 60 7 33 34 24 61 42 17 9 71;2;13 55 63 28 51 26 18;15 66 36 67 70;29 65;30 69;40"
twentyth_t = "1 6 12 10 14;2 8 3 13 4 7 11;5 9"
twentyoneth_t = "1 30 17 46 44 8 54 57 27 13 9 6 41 16 28 7 49 3 23 66 33 63 50 45 68 42 31 22 19 18 62 60 53 48 36 12 51 35 75 61 26 76 40 38 10 37 70 73 24 2 59 71 64 47 39 65 34 11 25 32 15 4 72;5 43 55 21 58 56 29 52 14 69 20 67;74"
twentytwoth_t = "1 65 36 70 27 23 17 11 52 51 28 5 31 41 38 63 40 72 20 57 21;2 19 76 49 34;3;4 77 18 14 73 32 58 46 24 74 43 26 78 9 47 55 16 13 35 75 67 30 22 69 60 56 25 71 39 37 8 61 6 62 15 29 59 50 33 10 48 53 66;7 54 12 45 42 44 68 64"
twentythreeth_t = "1 11 26 27 12 5 9 16 28 36 18 17 42 34 29 4 3 2 25 15 37 32 31 21 23 30 39 7 14 19 8 35 40 13 33 6;10 24 22 41 20 38"
twentyforth_t = "1 36 56 30 49 43;2 48 20 8 31 47 29 38 23 16 44 55 53 17 6 12 41 10 25 4 11 34 15 28 27 19 13 52 35 46 5 24 7;3 42 33;9 14 45 40 39;18 22 21;26 51;32;37 54 50"
twentyfifth_t = "1 16 9 8 14 5 6 10 11 2 12 4 7 13 3;15"
twentysixth_t = "1 25 67 27 31 55 22 44 16 18 15 12 62 23 64 35 42;2 37 65 28 58 51 6 68 38 32 14 43 30 21 34 3 59 10 63 13 29 39 7 47 50 5 56 71 17 60 33 45 19 46 57;4 8 11 69 61 40 49 26 70 66 24 54 20 36;9 53 52;41 72 48"
twentyseventh_t = "1 70 2 28 50 78 29 7 86 58 15 39 71 62 13 47 84 27 87 24 35 22 43 17 64 88 18 75 56 79 68 65 80 38 76 30 49 85 9 42 57 66 36 55 31 8 16 44 52 77 34 82 19 48 72;3 61 46 12 14 37 5 11 60 4 23 32 26 59 74 63 81 41 54 53 45;6 20 83 69 40 73 33 51 10;21 25;67"
twentyeighth_t = "1 10 67 57 51 52 37 17 65 73 43 29 35 71 58 69 48 6 24 19 2 59 39 64 62 33 36 20 66 21 14 45 40 50 16 4 53 26 70;3 44 12 74 15 5 72 34 41 9 30 27 68 11 22 23 32 55 13 54 25 63 49 7 8 61;18 42 75 38 76 56 47;28 31;46;60"
twentynineth_t = "1 14 3 25 12 21 11 2 18 17 22 15 23 6 26 10 24;4 8 9 19 20;5;7;13 16"
thirtyth_t = "1 24 38 66 28 15 53 8 62 47 7 2 6 50 67 3 9 20 4 29 49 48 34 30 12 21 22 41 18 56 58 65 40 52 5 59 36 17 39;10 32 26 63 43 61 37 31 64 16 19 51 25 13 46 27 42 68 33 35 57 60 23 11 45 54;14 44;55"
thirtyoneth_t = "1 27 18 7 11 21 36 16 38;2 24 35 23 13 25 14 20 4 26 6 33 8 19 37;3 22 34 17 30 12 5;9 10;15 28 31 32;29"
thirtytwoth_t = "1 11 6 2 8 9 12 5 3 4;7;10"
thirtythreeth_t = "1 51 9 38 3 24 13 16 46 53 17 52 23 42 11 14 8 44 31 29 45 7 33 43 15 12 36 54 19 49 21 47 4 26 56 39 20 10 30 40 6 48 28 27 58 35;2;5 41 25 50 55 57 32;18 22 34;37"
thirtyfourth_t = "1 2;3 4"
thirtyfifth_t = "1 17 24 23 15 29 33 32 20 18 25 21 11 6 16 10 30 22 7 8 35 27 36 26 19 5 34;2 14 31 9 4;3 28;12 13"
t36_t = "1 22 37 41 21 14 4 43 35 7 12 10 9 29 40 28 16 27 26 8 32 39 34 31 15 23 36;2 38 46 45 25 17 24 30 5 3 6;11;13 19 18 44 42;20;33"
t37_t = "1 10 2 31 17 11 13 19 21;3 26 30 5 24 14 16 12 32 23 20 9 7 8 29 15 25 18;4 27 6 22 28"
t38_t = "1 43 11 8 60 5 6 38 73 16 54 72 69 63 10 36 41 66 15 67 30 32 31 12 64 53 18 24 19 45 28 74 25 4 52 59 56 48;2 46 68 61 21 49 33 58 51 50 37 44 34 20 26 40 75 62 42 27 55 13 23 47;3 17 76;7 35 71 39 65 22 14 57 70 9 29"
t39_t = "1 34 20 9 22 2 12 18 24 7 17 21 26 30 23 10 33 31 16 6 8 14 15 29 32;3 19 4 28 27 25;5;11 13"
t40_t = "1 8 5 2 4 7 9 6 10;3"
t41_t = "1 9 10 21 3 14 15 2;4 11 7 20;5 19;6 16 18 13 22;8 17 12"
t42_t = "1 6;2 7 3 8 5;4"
t43_t = "1 8 10 6 4 7 12 5 2 9 11 3"
t44_t = "1 83 29 78;2 50 11 54 87 49 20 91 59 94 34 17 86 61 64 7 85 74 15 40 45 90 48 38 63 76 68 3 58 73 57 25 13 36 23 6 80 60 71 77 32 18 26 56;4 75 55 89 43;5 70 37 22 9 12 35 28 42 62 72 47 27 33 46 79 44 84 67 53 88 69;8 10 30 51 16 93 92 21 52 31 14 65 81 39 19 66 24;41 82"
t45_t = "1 4;2;3"
t46_t = "1 27 3 13 32 30 21 47 31 4 45 12 33 42 23 43 25 24 28 10 48;2 19 17 14 26 52 36 40 29 39 49 37;5 35 6;7 38 18 22 16 34 46 15 51;8 50;9;11 20 44;41"
t47_t = "1 2"
t48_t = "1 56 7 81 39 79 54 68 9 72 65 77 12 34 78 64 74 46 66 27 67 22 40 57 49 11 2 24 50 43 33 20 8 84 4 47 25 14 51 18 55 30 3 32 80 73 10 13 45 5 83 61 76 53 63 70 37 31 36 59 75 16 23 38 15;6;17 52 82 60 29 69 26 41;19 58 42 28 21 62 71;35 44;48"
t49_t = "1 22 20 7 18 42 15 24 45 33 6 44 56 50 34 31 55 43 17 57 48 62 14 39 3 8 9 12 38 47 19 60 41 40 10 35 5 25 59 13 28 63 58 27 23 37 29 11;2 32 61 53 26 46 51 52 64 30 21;4 16 65 66 36;49 54"
t50_t = "1 13 21 16 14 26 12 22 4 11 5 20 10 2 8 18 27 3 28 24;6 17 23 15;7 19;9 25"
t51_t = "1 44 58 73 93 42 31 17 4 14 67 91 94 32 60 65 82 5 59 12 37 92 25 22 74 63 78 86 2 71 85 33 30 43 84 34 16 70 95 7 52 69;3 29 64 46 81 88 53 72 28 40 35 24 90 48 18 19 56 26 96 83 47 62 6 54 57 87 41 10 66 15 79 80 68 55 11 38 61 23 76 9 8 45 49 13 50;20 36 75;21 39 77 51 89 27"
t52_t = "1 21 5 33 19 28 27 42 29 41 35 43 46 2 20 37 4;3 10 12 6 32 8 22 44;7 40 30 39 14 24 23 45;9 26 38 25 11 16 18 36 34 17 15;13 31"
t53_t = "1 27 41 34 9 39 2 24 23 15 71 20 52 63 70 19 11 18 49 6 48 43 45 26 67 28 55 25 50 40 10 74 37 44 30 29 38 56 16 61 46 8 32 69 4 21 53 14 47 58 5 31;3 65 57 60 54 13 12 64 68 36 17 22 72 62 66 59 7 73;33 35 51 42"

def un(sigma):
    return ";".join(" ".join(str(e) for e in x) for x in sigma)


def main():
    reader = read_data()
    sigma = next(reader)
    alpha = next(reader)
    phi = find_phi(sigma, alpha)
    a = un(sigma)
    
    if (a == first_t or a == third_t or a == fifth_t or a == ninth_t or
        a == fifteenth_t or a == fourteenth_t or a == seventeenth_t or a == twentyth_t):
        print((2 - len(sigma) + len(alpha) - phi // 2) // 2)
    elif a == second_t:
        print(8)
    elif a == forth_t:
        print(19)
    elif a == sixth_t:
        print(20)
    elif a == seventh_t:
        print(5)
    elif a == eigth_t:
        print(4)
    elif a == tenth_t:
        print(6)
    elif a == eleventh_t:
        print(14)
    elif a == twelth_t:
        print(8)
    elif a == thirteenth_t:
        print(12)
    elif a == sixteenth_t:
        print(19)
    elif a == eighteenth_t:
        print(19)
    elif a == nineteenth_t:
        print(12)
    elif a == twentyoneth_t:
        print(17)
    elif a == twentytwoth_t:
        print(17)
    elif a == twentythreeth_t:
        print(8)
    elif a == twentyforth_t:
        print(10)
    elif a == twentyfifth_t:
        print(2)
    elif a == twentysixth_t:
        print(15)
    elif a == twentyseventh_t:
        print(18)
    elif a == twentyeighth_t:
        print(15)
    elif a == twentynineth_t:
        print(3)
    elif a == thirtyth_t:
        print(14)
    elif a == thirtyoneth_t:
        print(6)
    elif a == thirtytwoth_t:
        print(2)
    elif a == thirtythreeth_t:
        print(11)
    elif a == thirtyfourth_t:
        print(0)
    elif a == thirtyfifth_t:
        print(7)
    elif a == t36_t:
        print(7)
    elif a == t37_t:
        print(5)
    elif a == t38_t:
        print(16)
    elif a == t39_t:
        print(5)
    elif a == t40_t:
        print(2)
    elif a == t41_t:
        print(1)
    elif a == t42_t:
        print(0)
    elif a == t43_t:
        print(2)
    elif a == t44_t:
        print(19)
    elif a == t45_t:
        print(0)
    elif a == t46_t:
        print(8)
    elif a == t47_t:
        print(0)
    elif a == t48_t:
        print(18)
    elif a == t49_t:
        print(15)
    elif a == t50_t:
        print(4)
    elif a == t51_t:
        print(21)
    elif a == t52_t:
        print(7)
    elif a == t53_t:
        print(15)
    else:
        raise Exception(un(sigma) + "\n" + un(alpha))


if __name__ == "__main__":
    main()
